import Link from "next/link";
import { getNowPlaying } from "utils/spotify";

const SpotifyIcon = () => {
  return (
    <svg
      width="24"
      height="25"
      viewBox="0 0 24 25"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className="h-4 w-4 fill-[#1ED760]"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M0 12.3871C0 5.76289 5.37581 0.387085 12 0.387085C18.6242 0.387085 24 5.76289 24 12.3871C24 19.0113 18.6242 24.3871 12 24.3871C5.37581 24.3871 0 19.0113 0 12.3871ZM19.05 10.9935C19.2677 11.1193 19.4226 11.1822 19.6742 11.1822C20.2645 11.1822 20.7968 10.7129 20.7968 10.0548C20.7968 9.47902 20.55 9.17902 20.1726 8.96128C17.4677 7.38386 13.7661 6.64838 10.2339 6.64838C8.15807 6.64838 6.25162 6.88547 4.54839 7.38386C4.11291 7.50967 3.70646 7.88225 3.70646 8.54031C3.70646 9.18386 4.19517 9.68225 4.83388 9.68225C5.02757 9.68225 5.21117 9.6284 5.36784 9.58246C5.39903 9.57331 5.42915 9.56447 5.45807 9.55644C9.44517 8.44354 15.6048 8.93709 19.05 10.9935ZM17.6435 14.7008C17.7963 14.7838 17.9537 14.8693 18.1742 14.8693C18.7016 14.8693 19.1081 14.4484 19.1129 13.9258C19.1129 13.5048 18.9581 13.2048 18.5661 12.9726C16.1758 11.55 13.1419 10.771 10.0016 10.771C7.98872 10.771 6.61452 11.0516 5.26936 11.429C4.77097 11.5693 4.51936 11.9129 4.51936 12.4306C4.51936 12.9484 4.94033 13.3693 5.45807 13.3693C5.61822 13.3693 5.72864 13.3353 5.86826 13.2923C5.91847 13.2768 5.97245 13.2602 6.03388 13.2435C10.0452 12.1548 14.5548 12.8758 17.579 14.6661C17.6006 14.6775 17.622 14.6891 17.6435 14.7008ZM16.3548 17.8693C16.5436 17.9806 16.6694 18.0435 16.8726 18.0435C17.2645 18.0435 17.6081 17.7387 17.6081 17.2984C17.6081 16.8581 17.4339 16.6887 17.1387 16.5C13.6839 14.4339 9.63388 14.3564 5.67097 15.2322C5.30807 15.3097 5.01291 15.5468 5.01291 16.0452C5.01291 16.4371 5.30807 16.8097 5.77742 16.8097C5.88762 16.8097 6.06345 16.7619 6.22526 16.718C6.26951 16.706 6.31271 16.6942 6.35323 16.6839C9.82259 15.9726 13.3355 16.05 16.3548 17.8693Z"
      />
    </svg>
  );
};

export const NowPlaying = async () => {
  const data = await getNowPlaying();
  return (
    <Link
      href={data.item.album.artists[0]?.external_urls.spotify || ""}
      target="_blank"
    >
      <div className="flex items-center gap-2 text-sm">
        <SpotifyIcon />
        <span>{data.item.album.artists[0]?.name}</span>
      </div>
    </Link>
  );
};
